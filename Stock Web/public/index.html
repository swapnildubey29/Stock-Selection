<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Selection Webpage</title>
    <style>body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }
    
    .container {
        max-width: 600px;
        margin: 50px auto;
        text-align: center;
    }
    
    select, button {
        margin: 10px;
        padding: 8px 12px;
        font-size: 16px;
    }
    
    #data-container {
        margin-top: 20px;
        border: 1px solid #ccc;
        padding: 10px;
        text-align: left;
        overflow: auto;
        max-height: 300px;
    }
    </style>
</head>
<body>
    <div class="container">
        <h1>Stock Selection Webpage</h1>
        <select id="stock-dropdown">
        </select>
        <button id="fetch-button">Submit</button>
        <div id="data-container">
            <!-- Fetched data will be displayed here -->
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
    const dropdown = document.getElementById("stock-dropdown");
    const fetchButton = document.getElementById("fetch-button");
    const dataContainer = document.getElementById("data-container");

    // Populate dropdown menu with predefined list of stocks or indices
    const stocks = ["Tata Steel", "IRCTC", "infosys", "Zomato", "Cipla", "HAL"];
    stocks.forEach(stock => {
        const option = document.createElement("option");
        option.text = stock;
        dropdown.add(option);
    });

    // Function to fetch historical candle data
    async function fetchData(symbol) {
        try {
            const response = await fetch(`https://api.upstox.com/v2/${symbol}/historical-candle`);
            const data = await response.json();
            displayData(data);
        } catch (error) {
            console.error("Error fetching data:", error);
        }
    }

    // Function to display fetched data
    function displayData(data) {
        // Clear previous data
        dataContainer.innerHTML = "";

        // Display fetched data in dataContainer
        data.forEach(candle => {
            const candleInfo = document.createElement("div");
            candleInfo.textContent = `Date: ${candle.date}, Open: ${candle.open}, High: ${candle.high}, Low: ${candle.low}, Close: ${candle.close}`;
            dataContainer.appendChild(candleInfo);
        });
    }

    // Event listener for fetch button click
    fetchButton.addEventListener("click", function() {
        const selectedSymbol = dropdown.value;
        if (selectedSymbol) {
            fetchData(selectedSymbol);
        } else {
            alert("Please select a stock or index symbol.");
        }
    });
});

    </script>
    
</body>
</html>